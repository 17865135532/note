memcached作为高性能的分布式缓存系统，它的用户有Twitter、Flickr、Wikipedia、weibo等等，但凡数据量达到一定量级的厂商都在使用，它的作用就是通过缓存数据库查询结果，减少数据库访问次数，以提高动态Web应用的速度。  
####安装：
1. 下载[libevent](https://github.com/downloads/libevent/libevent/libevent-2.0.21-stable.tar.gz)
2. 下载[memcached](http://memcached.googlecode.com/files/memcached-1.4.15.tar.gz)
3. 安装：

    #安装libevent
    ./configure --prefix=/usr
    make
    sudo make install

    #安装memcached：
    ./configure --with-libevent=/usr
    make
    sudo make install

4. 启动memcache:

     memcached -d -m 1024 -u root -l 192.168.0.200 -p 11211 -c 1024 -P /tmp/memcached.pid
     或者
     memcached -p 11211 -m 64m -d

- -p TCP端口，默认是11211  
- -m 最大使用内存，默认64M。memcached是基于内存的缓存系统  
- -u 运行memcache的用户  
- -d 作为daemon进程在后台启动  
- -c 最大并发连接数  
- -l 监听的服务器IP地址  
- -P 保存memcache的pid文件  



使用非阻塞网络IO，在内存中开辟一块空间，建立一个HashTable，Memcached进程管理这些HashTable。  

memcached的Python客户端有一下几个：  
pylibmc： http://sendapatch.se/projects/pylibmc/ ，它是对libemcached的一个封装，http://libmemcached.org/libMemcached.html， ,在github fork数量是最多的。  

既然是依赖的libemcached，那么还需下载libmemecached，https://launchpad.net/libmemcached/1.0/1.0.17/+download/libmemcached-1.0.17.tar.gz   

导入 pylibmc的时候抛异常：

    ImportError: libmemcached.so.11: cannot open shared object file: No such file or directory




python-libmemcached : 看名字就知道也是对libmemcached的封装，与pylibmc不同的是它还需要依赖Pyrex http://code.google.com/p/python-libmemcached/  
cmemcache http://gijsbert.org/cmemcache/  ,  
python-memcache  http://www.tummy.com/software/python-memcached/  这个是纯python实现的客户端，  


折腾了下决定还是用python-memcache吧，安装   

    pip install python-memcache

花点时间来学习下源代码:memcache.py  

基本的使用方法：  

    import memcache
        mc = memcache.Client(['127.0.0.1:11211'], debug=0)
    
        mc.set("some_key", "Some value")
        value = mc.get("some_key")
    
        mc.set("another_key", 3)
        mc.delete("another_key")
    
        mc.set("key", "1")   # note that the key used for incr/decr must be a string.
        mc.incr("key")
        mc.decr("key")       #这里的decr方法减到0就不往下减了
    
    The standard way to use memcache with a database is like this::
    
        key = derive_key(obj)
        obj = mc.get(key)
        if not obj:
            obj = backend_api.get(...)
            mc.set(key, obj)
    
        # we now have obj, and future passes through this code
        # will use the object from the cache.

Client对象代表memcache servers 池，从构造方法接收的是一个数组就可以看出是一个pool。  

key 的值必须是：  
1. 简单的哈稀类型（string,integer等）  
2. 数组

它的方法可以划分为一下几组：  
设置：__init__, set_servers, forget_dead_hosts, disconnect_all, debuglog  
插入：set, add, replace, set_muti  
获取：get, get_multi  
整数：incr, decr  
移除：delete, delete_multi  



